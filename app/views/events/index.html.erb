<%# user must be able to click on each map marker to pop up a event %>
<%= form_tag events_path, method: :get do %>
      <%= text_field_tag :query,
      params[:query],
      class: "form-control search",
        placeholder: "Search by event or username" %>
      <% end %>

<% @events.each do |e| %>
  <%# if the event is expired, it willl not show in the map %>
    <% if e.end_time > Time.now %>
    <%= e.description %>
    <%= e.title %>
    <br>
    <%= cl_image_tag e.picture, height: 300%>
    <br>
    <% seconds = ( Time.parse(e.end_time) - Time.now) %>
  time before expires: <%= Time.at(seconds).utc.strftime("%H:%M:%S") %>

    <%# calculcate rundown_time with javascript https://www.geeksforgeeks.org/create-countdown-timer-using-javascript/, the end time will be event.end_time %>
    <br>




    <!-- this will set the end time of the event to the current time, thus "ending it" -->

     <%# e.comments.each do |comment|  %>
    <%# comment.content %>
      <%# <% end %>
    <%# each event must have a list of all their comments %>

    <%= e.comments.count %> comments
    <%# we must show the count of comments %>
    <% end %>





    <%# remember, @events is a array of all the events, and .comments will return an array of all the comments %>



    <br>
    <% end %>


<br>
<br>


<%= simple_form_for(@event) do |f| %>
<%= f.label :title %>
<%= f.text_field :title  %>
<%= f.label :description %>
<%= f.text_field :description %>
  <%= f.input :picture %>
  <%= f.input :picture_cache, as: :hidden %>
<%= f.input :end_time, collection: 1..24 %>

<%= f.submit %>

<% end %>

