<%# user must be able to click on each map marker to pop up a event %>

<% @events.each do |e| %>
  <%# if the event is expired, it willl not show in the map %>
    <% if e.end_time > Time.now %>
    <%= e.description %>
    <%= e.title %>
    <br>
    <% seconds = ( Time.parse(e.end_time) - Time.now) %>
<%= Time.at(seconds).utc.strftime("%H:%M:%S") %>
      <%= link_to "delete", user_event_path(e.user_id, e.id), method: :delete %>
    <%# calculcate rundown_time with javascript https://www.geeksforgeeks.org/create-countdown-timer-using-javascript/, the end time will be event.end_time %>
    <br>



    <%= link_to "end event", terminate_event_path(e.id), method: "patch" %>
    <!-- this will set the end time of the event to the current time, thus "ending it" -->

     <%# e.comments.each do |comment|  %>
    <%# comment.content %>
      <%# <% end %>
    <%# each event must have a list of all their comments %>

    <%= e.comments.count %> comments
    <%# we must show the count of comments %>
    <% end %>





    <%# remember, @events is a array of all the events, and .comments will return an array of all the comments %>



    <br>
    <% end %>


<br>
<br>


<%= simple_form_for(@event) do |f| %>
<%= f.label :title %>
<%= f.text_field :title  %>
<%= f.label :description %>
<%= f.text_field :description %>
<%= f.input :end_time, collection: 1..24 %>

<%= f.submit %>

<% end %>

